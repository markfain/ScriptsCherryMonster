# Scripts Cherry Monster

The scripts monster can do anything for you!
A convenient command line tool, mainly for creating scripts right from the terminal, but also:
* Tasks management
* Git
* Filesystem
* Slate related
* And many more...

The command line is written in typescript above node.js.

### Installing

1. Clone the ScriptsCherryMonster (for example ~/ScriptsCherryMonster)
2. cd to the ScriptsCherryMonster, install using

```
npm install
```

3. Add the following to your command line configuration, for example under ~/.zshrc (Using omlette //TODO: link).
This is used for the autocompletion feature.

```
### scm completion - begin. generated by omelette.js ###
if type compdef &>/dev/null; then
  _scm_complette() {
    compadd -- `scm --compzsh --compgen "${CURRENT}" "${words[CURRENT-1]}" "${BUFFER}"`
  }
  compdef _scm_complette scm
elif type complete &>/dev/null; then
  _scm_complette() {
    COMPREPLY=( $(compgen -W '$(scm --compbash --compgen "${COMP_CWORD}" "${COMP_WORDS[COMP_CWORD-1]}" "${COMP_LINE}")' -- "${COMP_WORDS[COMP_CWORD]}") )
  }
  complete -F _scm_complette scm
fi
### scm completion - end ###
```

4. Compile
```
npm run compile
```

5. Link (so it can be used as "scm <command> <params>" from the command line
```
npm run link
```


## File System Configuration
In the root folder, open config.json and specify the paths likeso:

```
	"placeholders":{
		"$SLATE_ROOT$":"SlateRoot",
		"$EPISODES$":"SlateRoot/Content/MathEpisodes/episodes/",
		"$ENVELOPES$":"SlateRoot/Envelopes/Envelopes/",
		"$INFRASTRUCTURE$":"SlateRoot/Infrastructure/",
		"$TOOLS_SERVER$":"/SlateTools/ToolsServer",
		"$SCM$": "ScriptsCherryMonster/",
		"$PLAY$": "Playground/",
		"$SCM_DISTRIBUTION$": "ScriptsCherryMonster/dist",
		"$SCM_SCRIPTS$": "ScriptsCherryMonster/src/scripts",
		"$SCM_COMMANDS$": "ScriptsCherryMonster/src/commands",
		"$SCM_TASKS$": "ScriptsCherryMonster/src/commands/tasks",
		"$SCM_NOTES$": "ScriptsCherryMonster/notes"
	}
}
```

These configurations are then used for navigating the file system, for example:
```
let beesAndFlowersEpisode = Files.file("$EPISODES$", "BeesAndFlowers");
for (let file of beesAndFlowersEpisode.listFiles()){
    if (file.getName().indexOf("json")>=0){
        console.log(file.getName());
    }
}
```

## General
To see all available commands, use scm <tab>. Autocompletion of course works, start typing and press <tab>.
To get information about a specific command, type scm <command> --help.

## Scripts
The idea is to create scripts (written in Typescript), fast, using the keyboard only.

### API
1. scm createScript
    prompts for script name and description. It will then open the IntelliJ on this file. Make sure the project is open
    for maximum convenience.
2. scm executeScript <script>
    executes a script (compiles and runs). To list all available scripts to execute, use scm executeScript <tab>.
3. scm archive <script>


## Tasks
Simple tasks tool management, with integrations. Currently integrated to asana (//TODO: link).

### Configuration
To configure the task tool, two things are needed:
1. Firebase configuration file: firebase.json (should be saved in the root)
    You should open a new empty project. All tasks will be saved there, under tasks in the database.
    To produce this file, go to Settings (in the console)->Service Sccounts ->Firebase Admin SDK->Generate new private key/
    Save this file in the root under firebase.json.

2. Asana configuration file: asana.json (should be saved in root)
    This file contains the secret token. This can be also generated in the Asana settings.
    The file is named asana.json (in the root), and looks this way:

```
    {
        token: "the asana token"
    }
```

### API
1. scm addtask <description>
    use --asana to add this task to the asana board.
    use -g for group name. Default group is "Slate"
```
    $ scm addtask "Develop a new browser" --asana -g Personal
```
2. scm listtasks
    lists all the tasks.
    use -g to specify the group to list
```
    $ scm listtasks -g Personal
```
3. scm removetask <id>
4. scm addnote <id> note

```
    $ scm listtasks -g Personal
```

5. scm starttask <id>
6. scm complete <id>
7. scm pausetask <id>

## Compare
I am using meld as a diff tool - https://yousseb.github.io/meld/
scm compare <file1> <file2> will compare file1 and file2.

## Git
A collection of useful tools and abbreviations to work with git, using the command line.

### API
1. scm gitadd <file>
    autocomplete, use TAB!
2. scm gitdiff <file>
    will diff current version against pushed version
3. scm gitbrowse
    opens a dual window, ctrl+a+backspace to switch between windows
    the left window shows the changes by commit, in the right window you can use somthing like scm gitdiff changes -c <partial_commit>
    then you can choose a specific file easily that will be compared

